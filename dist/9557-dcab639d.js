"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[9557],{12929:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(70355),a=r(49655),i=r(88186),o=r(30680);const d=({appearFocused:e,id:t,name:r})=>{const d=(0,n.useCallback)((()=>n.createElement(i.A,{appearFocused:e,id:t})),[t,e]);return n.createElement(o.A,{additionalClassName:"form-field--ccExpiry",input:d,labelContent:n.createElement(a.A,{id:"payment.credit_card_expiration_label"}),name:r})}},29557:(e,t,r)=>{r.d(t,{StripeLinkV2Button:()=>P,StripeOCSPaymentMethod:()=>g,StripeUPEPaymentMethod:()=>v,StripeV3PaymentMethod:()=>x});var n=r(31635),a=r(60269),i=r(69440),o=r(70355),d=r(89799),c=r(48407),l=r(31448),s=r(19285),m=r(32312),u=r(17080),p=r(59713);const h=(e,t,r)=>{const n=document.querySelector(e);return n?(0,p.A)(n,t,r):{}},b=(e=0)=>"number"!=typeof e?parseInt(e,10):e,f=(e='link[href*="font"]')=>{const t=document.querySelectorAll(e),r=[];return t.forEach((e=>{const t=null==e?void 0:e.getAttribute("href");t&&r.push({cssSrc:t})})),r},y=e=>{const t="18px",r="13px",n=h(`#${e}--input`,["color","background-color","border-color","box-shadow","font-family"]),a=h(`#${e}--label`,["color"]),o=h(`#${e}--error`,["color"]),d=h(`#${e}--accordion-header .form-label`,["color","font-size","font-family","font-weight","padding-top","padding-right","padding-bottom"]),c=h(`#${e}--accordion-header-selected`,["background-color"]),l=h(`#${e}--accordion-header.optimizedCheckout-form-checklist-item`,["border-bottom","border-color"]),{color:s,"font-size":m,"font-family":u,"font-weight":p,"padding-top":f=r,"padding-right":y=t,"padding-bottom":g=r}=d,v=(0,i.isEmpty)(d)?void 0:`${f} ${y} ${g} ${t}`,C=h(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::before"),E=h(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::after"),I=h(`#${e}--accordion-header-selected .form-label`,["border-color","background-color"],"::before");let k=h(".form-checklist-header--selected .form-label",["border-color","background-color","width","transform"],"::after");(0,i.isEmpty)(k)&&(k=h(`#${e}--accordion-header-selected .form-label`,["border-color","background-color","width","transform"],"::after"));const S=k.width||C.width,A=((e="")=>{const t=/matrix\(([^)]+)\)/.exec(e);if(!t)return;return t[1].split(",").map((e=>parseFloat(e.trim())))[0]})(k.transform)||.66,_=(e=>{const{radioIconOuterWidth:t=26,radioIconOuterStrokeWidth:r=1,radioIconInnerWidth:n=17}=e||{},a=b(t),i=b(r),o=b(n);return{outerWidth:`${(a/.88).toFixed(2)}px`,outerStrokeWidth:`${(i/a*88).toFixed(2)}px`,innerRadius:(o/a*88/2).toFixed(2)}})({radioIconOuterWidth:C.width,radioIconOuterStrokeWidth:C["border-width"],radioIconInnerWidth:S&&b(S)*A});return{variables:{colorPrimary:n["box-shadow"],colorBackground:n["background-color"],colorText:a.color,colorDanger:o.color,colorTextSecondary:a.color,colorTextPlaceholder:n.color,colorIcon:n.color,fontFamily:u||n["font-family"]},rules:{".Input":{borderColor:n["border-color"],color:n.color,boxShadow:n["box-shadow"]},".AccordionItem":{borderRadius:0,borderWidth:0,borderBottom:l["border-bottom"],borderColor:l["border-color"],boxShadow:"none",fontSize:m,fontWeight:p,color:s,padding:v},".AccordionItem:hover":{backgroundColor:c["background-color"],color:s},".AccordionItem--selected":{fontWeight:"bold",color:s,backgroundColor:c["background-color"]},".TabLabel":{color:s},".RadioIcon":{width:_.outerWidth},".RadioIconInner":{r:_.innerRadius,fill:E["background-color"]},".RadioIconOuter":{strokeWidth:_.outerStrokeWidth,stroke:C["border-color"],fill:C["background-color"]},".RadioIconInner--checked":{r:_.innerRadius,fill:k["background-color"]},".RadioIconOuter--checked":{stroke:I["border-color"],fill:I["background-color"]}}}},g=(0,s.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:s,method:p,onUnhandledError:h=i.noop}=e,b=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const g=(0,o.useRef)(),v=(0,o.useRef)(),{onToggle:C,selectedItemId:E}=(0,o.useContext)(m.A),[I,k]=(0,o.useState)(E),[S,A]=(0,o.useState)(!1),_=`${p.gateway}-${p.id}`,F=`${_}-component-field`,w=t;(0,o.useEffect)((()=>{v.current&&(clearTimeout(v.current),v.current=void 0),I&&E!==I&&(v.current=setTimeout((()=>{C(I)}),100))}),[C]),(0,o.useEffect)((()=>{var e;E!==_&&(k(E),null===(e=g.current)||void 0===e||e.call(g))}),[E,_]),(0,o.useEffect)((()=>{I===_&&C(I)}),[I,_]);const N=(0,o.useCallback)((()=>{w.hidePaymentSubmitButton(p,!1)}),[w,p]),{hidePaymentSubmitButton:x,disableSubmit:z,setFieldValue:O,setSubmit:P,setValidationSchema:$}=t,R=r.data.getInstruments(p)||[],{data:{getCheckout:T,isPaymentDataRequired:B},statuses:{isLoadingInstruments:V}}=r,W=T(),{initializationData:{isCustomChecklistItem:j}}=p,D=(0,o.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return A(!0),s.initializePayment(Object.assign(Object.assign({},e),{stripeocs:{containerId:F,layout:{type:j?"accordion":"auto",defaultCollapsed:E!==_,radios:!0,linkInAccordion:!0,spacedAccordionItems:!1,visibleAccordionItemsCount:0},appearance:y(F),fonts:f(),onError:h,render:N,paymentMethodSelect:k,handleClosePaymentMethod:e=>{g.current=e},togglePreloader:A}}))}))),[F,E,_,j,s,h,N,k,A]),q=(0,o.useCallback)((e=>s.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[a.BK]}))),[s]);return o.createElement(o.Fragment,null,S?o.createElement("div",{"data-test":"stripe-accordion-skeleton",style:{padding:"10px 18px"}},o.createElement(u.A,null)):o.createElement("style",null,`\n                .custom-checklist-item#radio-${_} {\n                    border-bottom: none;\n                }\n                .custom-checklist-item#radio-${_}:last-of-type {\n                    margin-bottom: -1px;\n                }\n            `),o.createElement(d.A,Object.assign({},b,{containerId:F,deinitializePayment:s.deinitializePayment,disableSubmit:z,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:x,initializeCustomer:q,initializePayment:D,instruments:R,isInstrumentCardCodeRequired:(0,c.A)(r),isInstrumentCardNumberRequired:(0,l.A)(r),isInstrumentFeatureAvailable:!1,isLoadingInstruments:V(),isPaymentDataRequired:B(),isSignedIn:(0,i.some)(null==W?void 0:W.payments,{providerId:p.id}),loadInstruments:s.loadInstruments,method:p,setFieldValue:O,setSubmit:P,setValidationSchema:$,signOut:s.signOutCustomer})),o.createElement("div",{style:{display:"none"}},o.createElement("div",{className:"form-checklist-item optimizedCheckout-form-checklist-item",id:`${F}--accordion-header`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",id:`${F}-radio-input`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"form-checklist-header--selected",id:`${F}--accordion-header-selected`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",defaultChecked:!0,id:`${F}-radio-input-selected`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${F}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${F}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${F}--label`}))))}),[{gateway:"stripeocs",id:"optimized_checkout"}]),v=(0,s.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:s,method:m,onUnhandledError:u=i.noop}=e,h=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const b=`stripe-${m.id}-component-field`,f=t,y=(0,o.useCallback)((()=>{f.hidePaymentSubmitButton(m,!1)}),[f,m]),{hidePaymentSubmitButton:g,disableSubmit:v,setFieldValue:C,setSubmit:E,setValidationSchema:I}=t,k=r.data.getInstruments(m)||[],{data:{getCheckout:S,isPaymentDataRequired:A,getPaymentProviderCustomer:_},statuses:{isLoadingInstruments:F}}=r,w=S(),N=r.data.getCustomer(),x=_(),z=null==x?void 0:x.stripeLinkAuthenticationState,O=null==N?void 0:N.isGuest,P=(0,o.useMemo)((()=>!(!O&&z)),[O,z])&&!O&&Boolean(m.config.isVaultingEnabled),$=(e,t)=>{const r=document.getElementById(e);if(!r)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return(0,p.A)(r,t)},R=(0,o.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=$(`${b}--input`,["color","background-color","border-color","box-shadow"]),r=$(`${b}--label`,["color"]),n=$(`${b}--error`,["color"]);return f.hidePaymentSubmitButton(m,!0),s.initializePayment(Object.assign(Object.assign({},e),{stripeupe:{containerId:b,style:{labelText:r.color,fieldText:t.color,fieldPlaceholderText:t.color,fieldErrorText:n.color,fieldBackground:t["background-color"],fieldInnerShadow:t["box-shadow"],fieldBorder:t["border-color"]},onError:u,render:y}}))}))),[s,b,u,m,f,y]),T=(0,o.useCallback)((e=>s.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[a.Tv]}))),[s]);return o.createElement(o.Fragment,null,o.createElement(d.A,Object.assign({},h,{containerId:b,deinitializePayment:s.deinitializePayment,disableSubmit:v,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:g,initializeCustomer:T,initializePayment:R,instruments:k,isInstrumentCardCodeRequired:(0,c.A)(r),isInstrumentCardNumberRequired:(0,l.A)(r),isInstrumentFeatureAvailable:P,isLoadingInstruments:F(),isPaymentDataRequired:A(),isSignedIn:(0,i.some)(null==w?void 0:w.payments,{providerId:m.id}),loadInstruments:s.loadInstruments,method:m,setFieldValue:C,setSubmit:E,setValidationSchema:I,signOut:s.signOutCustomer})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${b}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${b}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${b}--label`})))}),[{gateway:"stripeupe"},{gateway:"stripeupe",id:"klarna"}]);var C=r(39527),E=r(49655),I=r(3375),k=r.n(I),S=r(90767),A=r(14456),_=r(97429),F=r(2224);const w=({options:e})=>o.createElement("div",{className:"form-ccFields"},o.createElement("div",{className:k()("form-field","form-field--stripe-ccNumber")},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardNumberElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_number_label"})),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"CardNumber",id:e.cardNumberElementOptions.containerId}),o.createElement(A.A,null)),o.createElement("div",{className:"form-field form-field--ccExpiry"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardExpiryElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_expiration_label"})),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","widget-input--stripev3"),"data-cse":"ExpiryDate",id:e.cardExpiryElementOptions.containerId})),o.createElement("div",{className:"form-field form-ccFields-field--ccCvv"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardCvcElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_cvv_label"}),o.createElement(_.A,{placement:"top-start",tooltip:o.createElement(S.A,null)},o.createElement("span",{className:"has-tip"},o.createElement(F.A,null)))),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"SecurityCode",id:e.cardCvcElementOptions.containerId}),o.createElement(A.A,null)));var N;!function(e){e.Alipay="alipay",e.Card="card",e.CardCvc="cardCvc",e.CardExpiry="cardExpiry",e.CardNumber="cardNumber",e.Iban="iban",e.IdealBank="idealBank"}(N||(N={}));const x=(0,s.A)((e=>{var{language:t,paymentForm:r,checkoutState:a,checkoutService:s,method:m,onUnhandledError:u=i.noop}=e,p=(0,n.__rest)(e,["language","paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const{useIndividualCardFields:h}=m.initializationData,b=m.id,f=b!==N.Alipay?"optimizedCheckout-form-input widget--stripev3":"",y=`stripe-${b}-component-field`,g=(0,o.useMemo)((()=>{const e={base:"form-input optimizedCheckout-form-input"};return{[N.Card]:{classes:e},[N.CardCvc]:{classes:e,placeholder:""},[N.CardExpiry]:{classes:e},[N.CardNumber]:{classes:e,showIcon:!0,placeholder:""},[N.Iban]:{classes:e,supportedCountries:["SEPA"]},[N.IdealBank]:{classes:e}}}),[]),{hidePaymentSubmitButton:v,disableSubmit:I,setFieldValue:k,setSubmit:S,setValidationSchema:A}=r,{data:{getCheckout:_,isPaymentDataRequired:F,getCustomer:x,getConfig:z},statuses:{isLoadingInstruments:O}}=a,P=_(),$=x(),R=z(),T=a.data.getInstruments(m)||[],B=!(null==$?void 0:$.isGuest)&&Boolean(m.config.isVaultingEnabled),V=(0,o.useMemo)((()=>R?R.links.siteLink:null),[R]),W=(0,o.useCallback)((e=>{"stripev3_error"===e.type&&"auth_failure"===e.subtype&&(e.message=t.translate("payment.stripev3_auth_3ds_fail")),u(e)}),[t,u]),j=(0,o.useCallback)((e=>({cardNumberElementOptions:Object.assign(Object.assign({},e[N.CardNumber]),{containerId:"stripe-card-number-component-field"}),cardExpiryElementOptions:Object.assign(Object.assign({},e[N.CardExpiry]),{containerId:"stripe-expiry-component-field"}),cardCvcElementOptions:Object.assign(Object.assign({},e[N.CardCvc]),{containerId:"stripe-cvc-component-field"})})),[]),D=(0,o.useCallback)((e=>h?j(e):e[b]),[b,j,h]),{getHostedStoredCardValidationFieldset:q,getHostedFormOptions:L}=(0,C.i)({checkoutState:a,method:m,language:t,paymentForm:r}),U=(0,o.useCallback)(((e,t)=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return s.initializePayment(Object.assign(Object.assign({},e),{stripev3:Object.assign({containerId:y,options:D(g)},t&&{form:yield L(t)})}))}))),[y,D,g,s,L]);return o.createElement(o.Fragment,null,o.createElement(d.A,Object.assign({},p,{additionalContainerClassName:f,containerId:y,deinitializePayment:s.deinitializePayment,disableSubmit:I,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:v,initializePayment:U,instruments:T,isInstrumentCardCodeRequired:(0,c.A)(a),isInstrumentCardNumberRequired:(0,l.A)(a),isInstrumentFeatureAvailable:B,isLoadingInstruments:O(),isPaymentDataRequired:F(),isSignedIn:(0,i.some)(null==P?void 0:P.payments,{providerId:m.id}),loadInstruments:s.loadInstruments,method:m,onUnhandledError:W,renderCustomPaymentForm:()=>{const e=j(g);return o.createElement(w,{options:e})},setFieldValue:k,setSubmit:S,setValidationSchema:A,shouldRenderCustomInstrument:h,signOut:s.signOutCustomer,validateInstrument:(e,t)=>q(t)})),"iban"===m.id&&o.createElement("p",{className:"stripe-sepa-mandate-disclaimer"},o.createElement(E.A,{data:{storeUrl:V},id:"payment.stripe_sepa_mandate_disclaimer"})))}),[{gateway:"stripev3"}]);var z=r(63582),O=r(4907);const P=(0,s.A)((e=>{const t={onComplete:O.A,loadingContainerId:"checkout-app",methodId:"optimized_checkout",gatewayId:"stripeocs"};return o.createElement(z.A,Object.assign({additionalInitializationOptions:t,integrations:[a.BK]},e))}),[{id:"stripeocs"}])},36659:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(70355),a=r(49655),i=r(88186),o=r(30680),d=r(14456);const c=({appearFocused:e,id:t,name:r})=>{const c=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(i.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(d.A,null))),[t,e]);return n.createElement(o.A,{additionalClassName:"form-field--ccNumber",input:c,labelContent:n.createElement(a.A,{id:"payment.credit_card_number_label"}),name:r})}},39527:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(31635),a=r(69440),i=r(70355),o=r(82804),d=r(48407),c=r(31448),l=r(98363);const s=({checkoutState:e,method:t,language:r,paymentForm:s})=>{const{setFieldTouched:m,setFieldValue:u,setSubmitted:p,submitForm:h}=s,{config:b}=t,{cardCode:f}=b,y=f||null===f,g=(0,d.A)(e),v=(0,c.A)(e),C=(0,i.useCallback)((e=>`${(0,a.compact)([t.gateway,t.id]).join("-")}-${e}`),[t]),[E,I]=(0,i.useState)();return{getHostedStoredCardValidationFieldset:(0,i.useCallback)((e=>{const r=!!e&&v(e,t),n=!!e&&g(e,t);return i.createElement(l.A,{cardCodeId:n?C("ccCvv"):void 0,cardNumberId:r?C("ccNumber"):void 0,focusedFieldType:E})}),[E,C,g,v,t]),getHostedFormOptions:(0,i.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const n=["color","fontFamily","fontSize","fontWeight"],i=!!e&&v(e,t),d=!!e&&g(e,t);let c;return e?d?c=C("ccCvv"):i&&(c=C("ccNumber")):c=C("ccNumber"),{fields:e?{cardCodeVerification:d&&e?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv"),instrumentId:e.bigpayToken}:void 0,cardNumberVerification:i&&e?{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber"),instrumentId:e.bigpayToken}:void 0}:{cardCode:y?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv")}:void 0,cardExpiry:{accessibilityLabel:r.translate("payment.credit_card_expiration_label"),containerId:C("ccExpiry"),placeholder:r.translate("payment.credit_card_expiration_placeholder_text")},cardName:{accessibilityLabel:r.translate("payment.credit_card_name_label"),containerId:C("ccName")},cardNumber:{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber")}},styles:c?{default:yield(0,o.A)(c,n),error:yield(0,o.A)(c,n,o.S.Error),focus:yield(0,o.A)(c,n,o.S.Focus)}:{},onBlur:({fieldType:e})=>{E===e&&I(void 0)},onCardTypeChange:({cardType:e})=>{u("hostedForm.cardType",e)},onEnter:()=>{p(!0),h()},onFocus:({fieldType:e})=>{I(e)},onValidate:({errors:e={}})=>{(0,a.forIn)(e,((e=[],t)=>{var r,n;const a=`hostedForm.errors.${t}`;u(a,null!==(n=null===(r=e[0])||void 0===r?void 0:r.type)&&void 0!==n?n:""),e[0]&&m(a)}))}}}))),[E,C,y,g,v,r,t,m,u,p,h])}}},47459:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(70355),a=r(90767),i=r(49655),o=r(88186),d=r(30680),c=r(97429),l=r(2224),s=r(14456);const m=({appearFocused:e,id:t,name:r})=>{const m=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(o.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(s.A,null))),[t,e]),u=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,n.createElement(i.A,{id:"payment.credit_card_cvv_label"}),n.createElement(c.A,{placement:"top-start",tooltip:n.createElement(a.A,null)},n.createElement("span",{className:"has-tip"},n.createElement(l.A,null))))),[]);return n.createElement(d.A,{additionalClassName:"form-ccFields-field--ccCvv",input:m,labelContent:u,name:r})}},63582:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(31635),a=r(70355);const i=(0,r(19285).A)((({checkoutService:{deinitializeCustomer:e,initializeCustomer:t},checkoutButtonContainerClass:r,containerId:i,methodId:o,onUnhandledError:d,onWalletButtonClick:c,additionalInitializationOptions:l,integrations:s})=>((0,a.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t({methodId:o,integrations:s,[o]:Object.assign({container:i,onUnhandledError:d,onClick:()=>c(o)},l)})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield e({methodId:o})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}}))})),[]),a.createElement("div",{className:r,"data-test":i,id:i}))),[])},82804:(e,t,r)=>{r.d(t,{A:()=>m,S:()=>n});var n,a=r(69440),i=r(70355),o=r(54622),d=r(59713),c=r(9343),l=r(85216),s=r(10156);function m(e,t,r=n.Default){const m=document.createElement("div"),u=document.getElementById(e);if(!u)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return u.appendChild(m),new Promise((e=>{o.render(i.createElement(c.Ay.Provider,{value:{isSubmitted:!0,setSubmitted:a.noop}},i.createElement(l.A,{hasError:r===n.Error},i.createElement(s.A,{appearFocused:r===n.Focus,ref:r=>{r&&(e((0,d.A)(r,t)),o.unmountComponentAtNode(m),m.parentElement&&m.parentElement.removeChild(m))}}))),m)}))}!function(e){e.Default="default",e.Error="error",e.Focus="focus"}(n||(n={}))},88186:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(31635),a=r(3375),i=r.n(a),o=r(70355);const d=e=>{var{additionalClassName:t,appearFocused:r,testId:a}=e,d=(0,n.__rest)(e,["additionalClassName","appearFocused","testId"]);return o.createElement("div",Object.assign({},d,{className:i()("form-input","optimizedCheckout-form-input",{"form-input--focus":r},{"optimizedCheckout-form-input--focus":r},t),"data-test":a}))}},89799:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(31635),a=r(69440),i=r(70355),o=r(52137),d=r(43125),c=r(11474),l=r(62677),s=r(40646),m=r(91182),u=r(3375),p=r.n(u),h=r(72769),b=r(49655);const f=({buttonId:e,shouldShowEditButton:t})=>{if(t){const t=i.createElement(b.A,{id:"remote.select_different_card_action"});return i.createElement("p",null,i.createElement("button",{className:p()("stepHeader","widget-link-amazonpay"),id:e,onClick:(0,h.A)(),type:"button"},t))}return null},y=({shouldShowDescriptor:e,paymentDescriptor:t})=>e&&t?i.createElement("div",{className:"payment-descriptor"},t):null,g=({additionalContainerClassName:e,containerId:t,hideContentWhenSignedOut:r,hideWidget:n,isSignInRequired:a,isSignedIn:o,method:d,renderCustomPaymentForm:c,shouldRenderCustomInstrument:l,shouldShowCreditCardFieldset:s})=>i.createElement("div",{className:p()("widget",`widget--${d.id}`,"payment-widget",l?"":e),id:t,style:{display:r&&a&&!o||!s||n?"none":void 0},tabIndex:-1},l&&c&&c()),v=({instruments:e,hideWidget:t=!1,isInitializing:r=!1,isAccountInstrument:u,isInstrumentFeatureAvailable:p,isLoadingInstruments:h,shouldHideInstrumentExpiryDate:b=!1,shouldShow:v=!0,hideVerificationFields:C,method:E,storedCardValidationSchema:I,isPaymentDataRequired:k,setValidationSchema:S,loadInstruments:A,onUnhandledError:_=a.noop,deinitializeCustomer:F,deinitializePayment:w,setSubmit:N,initializeCustomer:x,initializePayment:z,signInCustomer:O,isSignedIn:P,isSignInRequired:$,isInstrumentCardNumberRequired:R,validateInstrument:T,containerId:B,hideContentWhenSignedOut:V=!1,renderCustomPaymentForm:W,additionalContainerClassName:j,shouldRenderCustomInstrument:D=!1,paymentDescriptor:q,shouldShowDescriptor:L,shouldShowEditButton:U,buttonId:M,setFieldValue:H})=>{const[G,J]=(0,i.useState)(!1),[K,Q]=(0,i.useState)(void 0),X=(0,i.useRef)(e);(0,i.useEffect)((()=>{X.current=e}),[e]);const Y=(0,i.useCallback)((()=>{if(G)return;const e=X.current.find((e=>e.defaultInstrument))||X.current[0];return e?e.bigpayToken:void 0}),[G]),Z=(0,i.useCallback)((()=>{const e=K||Y();return(0,a.find)(X.current,{bigpayToken:e})}),[K,Y]),ee=(0,i.useCallback)((()=>{if(!k)return null;const e=Z();return p&&e&&I||null}),[Z,p,k,I]),te=(0,i.useCallback)(((e,t)=>!e&&(0,o.T)(t)?t:void 0),[]),re=(0,i.useCallback)((t=>{if(0===e.length)return J(!0),Q(void 0),void H("instrumentId","");if(K===t){const e=Y();Q(e),H("instrumentId",e)}}),[e,K,Y]),ne=(0,i.useCallback)((()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){J(!0),Q(void 0),w&&(yield w({gatewayId:E.gateway,methodId:E.id})),z&&(yield z({gatewayId:E.gateway,methodId:E.id}))}))),[E,w,z]),ae=(0,i.useCallback)((e=>{J(!1),Q(e)}),[]),ie=(0,i.useCallback)((()=>{const t=K||Y(),r=(0,a.find)(e,{bigpayToken:t});if(r){(0,d.A)(r);const e=R(r,E);if(C)return;if(T)return T(e,r)}}),[K,Y,e,E,C,T]),oe=()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const e=X.current;if(!k)return void N(E,null);if($&&!P)return N(E,O||null),x?x({methodId:E.id}):void 0;let t;if(N(E,null),!G){const r=K||Y(),n=e.find((e=>e.bigpayToken===r))||e[0];n&&(0,d.a)(n)&&(t=n)}return z?z({gatewayId:E.gateway,methodId:E.id},t):void 0})),de=K||Y(),ce=de&&e.find((e=>e.bigpayToken===de))||e[0],le=e.filter((e=>!(0,o.T)(e))),se=e.filter((e=>(0,o.T)(e))),me=p&&e.length>0,ue=!me||G,pe=(r||h)&&!t,he=ce?te(G,ce):void 0,be=e[0]&&(0,o.T)(e[0]);(0,i.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,ee());try{p&&(yield null==A?void 0:A()),yield oe()}catch(e){e instanceof Error&&_(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,null),N(E,null);try{w&&(yield w({gatewayId:E.gateway,methodId:E.id})),F&&(yield F({methodId:E.id}))}catch(e){e instanceof Error&&_(e)}}))})),[]);const fe=(0,i.useRef)(!0),ye=(0,i.useRef)(e.length),ge=(0,i.useRef)(k),ve=(0,i.useRef)(K);return(0,i.useEffect)((()=>{if(fe.current)return void(fe.current=!1);S(E,ee());(ve.current!==K||Number(ye.current)>0&&0===e.length||ge.current!==k)&&(ve.current=K,ye.current=e.length,ge.current=k,(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{w&&(yield w({gatewayId:E.gateway,methodId:E.id})),yield oe()}catch(e){e instanceof Error&&_(e)}})))}),[K,e,k]),v?i.createElement(m.A,{hideContentWhenLoading:!0,isLoading:pe},i.createElement("div",{className:"paymentMethod--hosted"},be&&me&&i.createElement(c.A,{instruments:se,onSelectInstrument:ae,onUseNewInstrument:ne,selectedInstrument:he}),!be&&me&&i.createElement(l.A,{instruments:le,onDeleteInstrument:re,onSelectInstrument:ae,onUseNewInstrument:ne,selectedInstrumentId:de,shouldHideExpiryDate:b,validateInstrument:ie()}),i.createElement(y,{paymentDescriptor:q,shouldShowDescriptor:L}),i.createElement(g,{additionalContainerClassName:j,containerId:B,hideContentWhenSignedOut:V,hideWidget:t,isSignInRequired:$,isSignedIn:P,method:E,renderCustomPaymentForm:W,shouldRenderCustomInstrument:D,shouldShowCreditCardFieldset:ue}),p&&i.createElement(s.A,{instrumentId:de,instruments:e,isAccountInstrument:Boolean(u||be)}),i.createElement(f,{buttonId:M,shouldShowEditButton:U}))):i.createElement("div",{style:{display:"none"}})}},98363:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(70355),a=r(49655),i=r(36659),o=r(47459),d=r(12929);const c=({cardCodeId:e,cardNumberId:t,cardExpiryId:r,focusedFieldType:c})=>n.createElement(n.Fragment,null,t&&n.createElement("p",null,n.createElement("strong",null,n.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_title_text"})),n.createElement("br",null),n.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_text"})),n.createElement("div",{className:"form-ccFields"},t&&n.createElement(i.A,{appearFocused:"cardNumber"===c,id:t,name:"hostedForm.errors.cardNumberVerification"}),e&&n.createElement(o.A,{appearFocused:"cardCode"===c,id:e,name:"hostedForm.errors.cardCodeVerification"}),r&&n.createElement(d.A,{appearFocused:"cardExpiry"===c,id:r,name:"hostedForm.errors.cardExpiryVerification"})))}}]);
//# sourceMappingURL=9557-dcab639d.js.map