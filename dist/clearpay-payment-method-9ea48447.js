"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[1585],{31698:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(31635),a=n(44218),s=n(69440),o=n(70355),r=n(65685),d=n(94611),u=n(11474),c=n(40646),m=n(91182);const l=e=>{const{description:t,isInitializing:n=!1,initializePayment:l,method:h,onUnhandledError:g=s.noop,deinitializePayment:y}=e,[p,I]=(0,o.useState)(!1),[f,k]=(0,o.useState)(),v=function(e){const t=(0,a.B4)(((e=[])=>e.filter(r.A))),n=(0,a.B4)(((e=[])=>e.filter((({trustedShippingAddress:e})=>e)))),{checkoutService:i,checkoutState:s,isUsingMultiShipping:o=!1,method:u}=e,{data:{getCart:c,getConfig:m,getCustomer:l,getInstruments:h,isPaymentDataRequired:g,isPaymentDataSubmitted:y},statuses:{isLoadingInstruments:p}}=s,I=c(),f=m(),k=l();if(!f||!I||!k)throw new Error("Unable to get checkout");const v=t(h(u)),S=n(v);return{instruments:S,isNewAddress:0===S.length&&v.length>0,isInstrumentFeatureAvailable:!y(u.id,u.gateway)&&(0,d.A)({config:f,customer:k,isUsingMultiShipping:o,paymentMethod:u}),isLoadingInstruments:p(),isPaymentDataRequired:g(),loadInstruments:i.loadInstruments}}(e),{isLoadingInstruments:S,instruments:w,isNewAddress:A,isInstrumentFeatureAvailable:b,loadInstruments:C}=v,E=(0,o.useCallback)((()=>{if(!p&&w.length)return(0,s.find)(w,{defaultInstrument:!0})||w[0]}),[p,w]),P=(0,o.useCallback)((()=>{I(!0),k(void 0)}),[]),M=(0,o.useCallback)((e=>{I(!1),k((0,s.find)(w,{bigpayToken:e}))}),[w]);(0,o.useEffect)((()=>((0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield l({gatewayId:h.gateway,methodId:h.id}),b&&(yield C())}catch(e){g(e)}})),()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield y({gatewayId:h.gateway,methodId:h.id})}catch(e){g(e)}}))})),[]);const z=f||E(),U=n||S,_=b&&(w.length>0||A);return t||b?o.createElement(m.A,{hideContentWhenLoading:!0,isLoading:U},o.createElement("div",{className:"paymentMethod paymentMethod--hosted"},t,_&&o.createElement(u.A,{instruments:w,onSelectInstrument:M,onUseNewInstrument:P,selectedInstrument:z}),b&&o.createElement(c.A,{instrumentId:z&&z.bigpayToken,instruments:w,isAccountInstrument:!0}))):null}},74362:(e,t,n)=>{n.d(t,{ClearpayPaymentMethod:()=>o});var i=n(31635),a=n(70355),s=n(31698);const o=(0,n(19285).A)((e=>{var{checkoutService:t,checkoutState:n,method:o,paymentForm:r}=e,d=(0,i.__rest)(e,["checkoutService","checkoutState","method","paymentForm"]);return a.createElement(s.A,Object.assign({},d,{checkoutService:t,checkoutState:n,deinitializePayment:t.deinitializePayment,initializePayment:t.initializePayment,method:o,paymentForm:r}))}),[{gateway:"clearpay"}])},94611:(e,t,n)=>{function i({config:e,customer:t,isUsingMultiShipping:n,paymentMethod:i}){return!(!e.checkoutSettings.isCardVaultingEnabled||!i.config.isVaultingEnabled||t.isGuest||n)}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=clearpay-payment-method-9ea48447.js.map